<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>QR Code Styling</title>
    <script type="text/javascript" src="https://unpkg.com/qr-code-styling@1.5.0/lib/qr-code-styling.js"></script>
</head>

<body>
    <div id="canvas"></div>
    <button id="download" onClick='downloadQR()' style="opacity:0;width:0;height:0;position:absolute;"></button>
    <script type="text/javascript">
        function getParameterByName(name, url = window.location.href) {
            name = name.replace(/[\[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }
        const upi_id = getParameterByName('upi')
        const receiver_name = getParameterByName('rname')

        const qrCode = new QRCodeStyling({
            width: 300,
            height: 300,
            type: "svg",
            data: "upi://pay?cu=INR&pa=" + upi_id + "&pn=" + receiver_name,
            image: "http://qr.mewt.in/src/mewt_small_flat.svg",
            dotsOptions: {
                color: "#444B54",
                type: "classy-rounded"
            },
            imageOptions: {
                crossOrigin: "anonymous",
                margin: 15
            },
            cornersSquareOptions: {
                type: "extra-rounded"
            }
        });
        qrCode.append(document.getElementById("canvas"));
        
        function downloadQR(){qrCode.download({ name: upi_id, extension: "svg" });}
    </script>
</body>

</html>
